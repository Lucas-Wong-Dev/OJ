### 0-1背包问题

- 共有N件物品，每件物品有一定的重量w~i~和一定的价值v~i~

- 现在我们有一个最大载重量W的包，问放入哪些物品能使得总价值最高？

- w~i~和v~i~均为整数，N<=100，W<=10000


#### 目标

- 找到解向量x，使得对于所有的x~i~={0,1}, i=1,2,…,N，∑w~i~x~i~<=W 并且∑x~i~v~i~最大。这个解向量描述了最优解（最优解是**能使放入背包的物品的总价值最大的放置方案**）
- 在该问题中需要确定x~1~、x~2~、…、x~N~的值。我们可以按i=1，2，…，N的次序来确定x~i~的值，这样就有N次决策即N个阶段

#### 解题步骤

##### 确定状态转移方程

设置二维动态规划数组dp，`dp[i][r]`表示<u>“包的剩余载重量为r（1≤r≤W），物品1、2、…、i（1≤i≤N）是否放入已考虑过时，已放入包中的物品的总价值”</u>。

对应的状态转移方程如下：

- `dp[i][0]`=0（1≤i≤N）——包的最大载重量为0，不能装入任何物品，此时最优解下的总价值为0
- `dp[0][r]`=0（1≤r≤W）——没有任何物品可装入，此时最优解下的总价值为0
- `dp[i][r]`=`dp[i-1][r]`——当 **背包剩余载重量r**<**物品i的重量w[i]** 时，物品i放不下
- `dp[i][r]`= max（`dp[i-1][r]`，`dp[i-1][r-w[i]]`+v[i]）——当 **背包剩余载重量r**>=**物品i的重量w[i]** 时，在**不放入**和**放入**物品i之间选最优解

![image-20201014145353969](0-1%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98.assets/image-20201014145353969.png)

这样，`dp[N][W]`便是0-1背包问题的最优解下，最终放入背包的物品的总价值

##### 推导出解向量x

即：根据二维动态规划数组dp推导出**能使放入背包的物品的总价值最大的放置方案**

![image-20201014145417101](0-1%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98.assets/image-20201014145417101.png)

当dp数组计算出来后，推导出解向量x的过程十分简单，从`dp[N][W]`开始：

- 若`dp[i][r]`≠`dp[i-1][r]`，即`dp[i][r]`==`dp[i-1][r-w[i]]`+v[i]，表示放入物品i，置x[i]=1，累计总价值maxv+=v[i]，包的剩余载重量r=r-w[i]
- 若`dp[i][r]`=`dp[i-1][r]`，表示物品i放不下或者不放入物品i，置x[i]=0